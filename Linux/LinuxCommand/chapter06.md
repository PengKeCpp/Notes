# 第 6 章	Linux 文件与目录管理

## 6.1 目录与路径

### 6.1.1 特殊目录

```
.      	当前目录
..		上一层目录
-		前一个工作目录
~		使用者身份的家目录
```

### 6.1.2 操作目录基本命令

pwd

- -P：显示出真正的路径，而非使用链接的路径

mkdir

- -m：设置权限，不使用默认权限
- -p：递归创建目录

rmdir

- -p：递归删除所有路径中的空目录

## 6.2 文件与目录管理

### 6.2.1基本命令

ls 

- -d：仅列出目录本身
- -l：显示详细信息
- -a：显示全部文件

cp

- -a：相当于-dr（如果操作人员本身没有修改拥有者和所属组的权限则加-a选项也无法修改）
- -d：源文件为链接文件，则复制链接文件属性而非文件本身
- -i：若目标文件存在，覆盖是会询问
- -r：递归复制
- -s：复制成为符号链接文件，快捷方式
- -l：硬链接的链接文件建立，而非复制文件本身

mv（移动或修改文件名）

- -u：若目标文件已经存在，且source比较新才会更新

- -r：移动目录时使用递归移动

## 6.3 文件内容查看

### 6.3.1 相关命令

cat

- -n：打印出行号连同空白行一起打印
- -A：可列出一些特殊字符而不是空白而已

nl：显示的时候，可以同时输出行号

more：一页一页地显示文件内容

less：相较于more可以往前翻页

head：取前面几行

- -n number：后面接数字代表显示几行

tail：取后面几行

touch：修改文件时间或创建文件

- modification time=mtime
- access time=atime
- status time=ctime
- ls显示的是mtime，--time=[ctime，atime]

## 6.4 文件与目录的默认权限与隐藏权限

### 6.4.1 文件默认权限：umask

> 因为x权限对于目录是很重要的，但是一般文件不应该有执行权限
>
> - 对于文件最大权限为：666
> - 对于目录最大权限为：777
> - 文件和目录默认权限=最大权限&(~umask)

### 6.4.2 文件隐藏属性

chattr [-+=] [ASacdistu] 文件或目录名称（配置文件隐藏属性）

- a：只有root才能设置这属性，文件只能增加数据，不能删除和修改数据
- i：只有root才能设置这属性，不能删除文件，改名，设置链接也无法写入或新增

lsattr （显示文件隐藏属性）

### 6.4.3 文件特殊权限：SUID、SGID、SBIT

#### SUID

- 仅对二进制有效
- 执行者需要对该程序有可执行权限
- 执行者将具有该程序拥有者的权限
- 本权限仅在执行该程序的过程中有效

> 注意：SUID只对文件有效对目录无效

#### SGID

当设置文件时：

- 对二进制有效，执行者要拥有x权限
- 执行者在执行过程中将会获得程序用户组的支持

当设置目录时：

- 用户对目录要具有r和x的权限，该用户能够进入此目录
- 用户在此目录下的有效用户组将会变成该目录的用户组
- 若用户在此目录具有w的权限，则新建文件的用户组与此目录的用户组相同

> 注意：SGID对文件和目录都有效

#### SBIT(粘滞位)

- 用户对于目录具有w、x权限，具有写入权限
- 当用户在此目录下建立的文件或目录，只有自己与root才能删除

> 注意：SBIT只对目录有效，对文件无效

#### SUID、SGID、SBIT权限设置

- 4为SUID
- 2为SGID
- 1为SBIT

> touch test
>
> chmod 6777 test
>
> 注意：若u、g、o没有可执行权限，S和T就代表空

## 6.5 命令与文件的查找

which：在【PATH】这个环境变量所规范的路径，去查找执行文件的文件名

whereis：由一些特定的目录查找文件

locate/updatedb：

- updatedb：根据/etc/updatedb.conf 的设置去查找系统硬盘内的文件，并更新/var/bin/mlocate内的数据库文件
- locate：依据/var/lib/mlocate内的数据库记录，找出用户所所输入关键词的文件名

find

